# 支持鼠标
set-option -g mouse on

# 解决 neovim ESC 延迟问题
set -sg escape-time 0

# 增加滚动缓冲区大小
set -g history-limit 50000

# tmux 消息显示时长
set -g display-time 4000

# 更频繁刷新状态栏
set -g status-interval 5

# 启用焦点事件（Neovim 必备）
set -g focus-events on

# 多显示器 + grouped sessions 更好用
setw -g aggressive-resize on

# vi 模式
setw -g mode-keys vi

# 窗口和面板从 1 开始
set -g base-index 1
set -g pane-base-index 1

# 真彩色支持（专业建议：使用 tmux-256color 而不是 screen-256color）
set -g default-terminal "tmux-256color"
set -as terminal-overrides ",xterm-256color:RGB"

# ✨ 智能切换：如果当前 pane 是 Vim，优先让 Vim 处理方向键
#    否则让 tmux pane 自己切换

bind-key -n C-h if -F "#{@pane-is-vim}" "send-keys C-h" "select-pane -L"
bind-key -n C-j if -F "#{@pane-is-vim}" "send-keys C-j" "select-pane -D"
bind-key -n C-k if -F "#{@pane-is-vim}" "send-keys C-k" "select-pane -U"
bind-key -n C-l if -F "#{@pane-is-vim}" "send-keys C-l" "select-pane -R"

# ✨ 智能缩放：Alt + hjkl
bind-key -n M-h if -F "#{@pane-is-vim}" "send-keys M-h" "resize-pane -L 3"
bind-key -n M-j if -F "#{@pane-is-vim}" "send-keys M-j" "resize-pane -D 3"
bind-key -n M-k if -F "#{@pane-is-vim}" "send-keys M-k" "resize-pane -U 3"
bind-key -n M-l if -F "#{@pane-is-vim}" "send-keys M-l" "resize-pane -R 3"

# ✨ 在 tmux 复制模式下，仍可用 hjkl 直达相邻 pane
bind-key -T copy-mode-vi 'C-h' select-pane -L
bind-key -T copy-mode-vi 'C-j' select-pane -D
bind-key -T copy-mode-vi 'C-k' select-pane -U
bind-key -T copy-mode-vi 'C-l' select-pane -R

# ⬅️ 上一个 Pane 快捷
bind-key -n C-\ select-pane -l
bind-key -T copy-mode-vi C-\ select-pane -l
